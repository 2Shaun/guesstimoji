(this.webpackJsonpguesstimoji2=this.webpackJsonpguesstimoji2||[]).push([[0],{49:function(e,t,n){e.exports=n(98)},85:function(e,t){},9:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(1),c=n(14),l=n.n(c),i=(n(9),n(15)),u=n.n(i),s=u()("http://157.245.254.196:5000/"),m=n(3),d=function(e){var t=e.header,n=e.emptyMessage,o=e.onClick,a=e.selections;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,t),r.a.createElement("div",{id:"board-select"},null!=a&&a.length>0?a.map((function(e,t){return r.a.createElement("button",{id:"board-select-button",onClick:function(){return o(t)},autoFocus:1==t},a[t])})):"".concat(n)))},p=function(e){var t=e.roomID,n=e.board,o=e.handleJoin;return r.a.createElement("button",{id:"board-select-button",onClick:function(){return o({roomID:t,board:n})}},"PLAY")},f=Object(a.b)((function(e){return{boards:e.boards.boards,previews:e.boards.previews,rooms:e.rooms}}))((function(e){var t=e.boards,n=e.previews,a=e.rooms,c=e.handleJoin,l=e.roomID,i=e.socket,u=Object(o.useState)(t?t[0]:null),s=Object(m.a)(u,2),f=s[0],g=s[1],b=Object(o.useState)(l),h=Object(m.a)(b,2),v=h[0],E=h[1];return r.a.createElement("div",{align:"center"},"Room ID:",r.a.createElement("input",{value:v,onChange:function(e){E(e.target.value)}}),r.a.createElement(p,{roomID:v,board:f,handleJoin:c}),r.a.createElement(d,{header:"Select Board",selections:n,onClick:function(e){g(t[e])},emptyMessage:"Waiting for boards fetch... \u231b"}),r.a.createElement(d,{header:"Join Room",selections:a,onClick:function(e){c({roomID:a[e],board:[]})},emptyMessage:"There are no rooms \ud83e\udd7a Make one or refresh!"}),r.a.createElement("button",{id:"board-select-button",onClick:function(){return i.emit("client:rooms/roomsRequested")}},"Refresh Rooms"))})),g=n(4),b=n.n(g),h=n(8),v="http://157.245.254.196:3005/graphql",E=function(e){return e?JSON.stringify(e).replace(/"([^"]+)":/g,"$1:").replace("{","(").replace("}",")"):""},y=function(e){return fetch(v,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(t){return console.log("response from ".concat(e,": "),t.data),t.data})).catch((function(e){console.error(e)}))},k=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n,o,r,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,n=E(t),o="\n        {\n            getEmojis".concat(n,"{\n                emoji\n            }\n        } \n    "),e.next=5,y(o);case 5:return r=e.sent,e.abrupt("return",r.getEmojis);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()})).then((function(e){return console.log("response from ".concat(t,": "),e.data.getBoards),e.data.getBoards})).catch((function(e){console.error(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(a.b)((function(e){return{randomSmiley:e.room.randomSmiley}}))((function(e){var t=e.handleJoin,n=e.roomID,o=e.randomSmiley,a=e.socket;return r.a.createElement("div",null,r.a.createElement("h1",{align:"center"},"GUESSTIM"+o+"JI"),r.a.createElement(f,{handleJoin:t,roomID:n,socket:a}))})),O=n(2),S=function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,"Room Name: ",e.roomID))};var D=function(e){var t=Object(o.useState)(e.value),n=Object(m.a)(t,2);return n[0],n[1],r.a.createElement("button",{className:"opponent-square"},e.value)},I=Object(a.b)((function(e){return{show:e.opponentBoard}}),null)((function(e){e.socket;var t=e.board,n=e.show,o=function(e){return r.a.createElement(D,{index:e,value:n[e]?t[e]:"\u2588"})};return r.a.createElement("div",{class:"board"},r.a.createElement("div",{class:"board-row"},o(28),o(29),o(30),o(31),o(32),o(33),o(34)),r.a.createElement("div",{class:"board-row"},o(21),o(22),o(23),o(24),o(25),o(26),o(27)),r.a.createElement("div",{class:"board-row"},o(14),o(15),o(16),o(17),o(18),o(19),o(20)),r.a.createElement("div",{class:"board-row"},o(7),o(8),o(9),o(10),o(11),o(12),o(13)),r.a.createElement("div",{class:"board-row"},o(0),o(1),o(2),o(3),o(4),o(5),o(6)))}));var L=function(e){var t=e.index,n=e.socket,a=e.value,c=e.onClick,l=e.onContextMenu,i=Object(o.useState)(!0),u=Object(m.a)(i,2),s=u[0],d=u[1];return r.a.createElement("button",{className:"square",onClick:c||function(){d(!s),n.emit("client:opponentBoard/clicked",t)},onContextMenu:function(e){e.preventDefault(),l()}},s?a:"\u2588")};var C=function(e){var t=e.pick;return r.a.createElement("button",{className:"choice"},t?"You picked ".concat(t,"."):"Pick your emoji!")},J={playerPicked:function(){return{type:"player/picked"}}},T=Object(a.b)((function(e){return{picked:e.player}}),J)((function(e){var t=e.socket,n=e.board,a=e.player,c=e.picked,l=e.playerPicked,i=Object(o.useState)(""),u=Object(m.a)(i,2),s=u[0],d=u[1],p=function(e){return r.a.createElement(L,{index:e,socket:t,value:n[e],onClick:c?null:function(){return function(e){t.emit("client:players/picked",{player:a,pick:n[e]}),l(),d(n[e])}(e)},onContextMenu:function(){!function(e){navigator.clipboard.writeText(n[e]).then((function(){alert(n[e]+" copied! Paste it in the board to guess!")}),(function(){alert("Couldn't copy emoji. Invalid permissions.")}))}(e)}})};return r.a.createElement("div",null,r.a.createElement("div",{class:"board-row"},p(0),p(1),p(2),p(3),p(4),p(5),p(6)),r.a.createElement("div",{class:"board-row"},p(7),p(8),p(9),p(10),p(11),p(12),p(13)),r.a.createElement("div",{class:"board-row"},p(14),p(15),p(16),p(17),p(18),p(19),p(20)),r.a.createElement("div",{class:"board-row"},p(21),p(22),p(23),p(24),p(25),p(26),p(27)),r.a.createElement("div",{class:"board-row"},p(28),p(29),p(30),p(31),p(32),p(33),p(34)),r.a.createElement("div",{class:"text-row"},r.a.createElement(C,{pick:s})))})),B=function(e){var t=e.handleSubmitTurn,n=e.askingTurn,a=Object(o.useState)(""),c=Object(m.a)(a,2),l=c[0],i=c[1];return n?r.a.createElement("div",null,r.a.createElement("input",{onChange:function(e){i(e.target.value)},value:l,placeholder:"Ask question or guess"}),r.a.createElement("button",{id:"board-select-button",onClick:function(){return t(l)}},"SEND")):r.a.createElement("div",null,r.a.createElement("button",{id:"board-select-button",onClick:function(){return t("Yes.")}},"YES"),r.a.createElement("button",{id:"board-select-button",onClick:function(){return t("No.")}},"NO"))},x=function(e){var t=e.opponent;return e.askingTurn?r.a.createElement("div",null,"Waiting for Player ".concat(t," to ask...")):r.a.createElement("div",null,"Waiting for Player ".concat(t," to answer your question..."))},N=Object(a.b)((function(e){return{picked:e.player}}),null)((function(e){e.socket;var t=e.player,n=e.picked,o=e.turn,a=(e.roomID,e.roomFull),c=e.handleSubmitTurn,l=o%4===1||o%4===2,i=1===t&&l||2===t&&!l,u=o%2===0,s=t%2+1;return e.winner?r.a.createElement("div",null,"GAME OVER"):a?n?i?r.a.createElement(B,{handleSubmitTurn:c,askingTurn:u}):r.a.createElement(x,{opponent:s,askingTurn:u}):r.a.createElement("div",null):r.a.createElement("div",null,"Waiting for Player 2 to join...")})),R=n(47),q=function(e){return{type:"gameLog/turnSubmitted",payload:e}},M=function(){return{type:"gameLog/cleared"}},P={turnSubmitted:q},_=Object(a.b)((function(e){return{gameLog:e.gameLog}}),P)((function(e){var t=e.socket,n=e.roomID,o=e.roomFull,c=e.gameLog,l=e.player,i=e.winner,u=l%2+1;console.log("GameLog -> player",l),console.log("GameLog -> opponent",u);var s=Object(a.c)();return r.a.createElement("div",null,r.a.createElement(N,{socket:t,player:l,turn:c.length,roomID:n,roomFull:o,handleSubmitTurn:function(e){var n=e.trim();t.emit("client:gameLog/turnSubmitted",{player:l,message:n}),s(q({username:"You",message:n}))},winner:i}),r.a.createElement("div",{class:"game-log-box"},c.map((function(e,t){var n=e.username,o=e.message;return r.a.createElement("div",{class:0===t?"game-log-last-message":"game-log-message",key:t},r.a.createElement("span",null,n+":"),r.a.createElement("span",null,o))}))))})),A=(n(89),u()("http://localhost:5000"),{turnSubmitted:q,cleared:M}),F=Object(a.b)((function(e){return Object(O.a)({},e.room)}),A)((function(e){var t=e.socket,n=e.roomID,c=e.roomFull,l=e.board,i=e.player,u=(e.gameCount,e.winner),s=Object(a.c)();return Object(o.useEffect)((function(){c?(t.on("server:gameLog/turnSubmitted",(function(e){s(q(e))})),t.on("server:opponentBoard/clicked",(function(e){s(function(e){return{type:"opponentBoard/click",payload:e}}(e))}))):(t.off("server:gameLog/turnSubmitted"),t.off("server:opponentBoard/clicked"))}),[c]),Object(o.useEffect)((function(){t.on("server:gameLog/cleared",(function(){s({type:"gameLog/cleared"})}))}),[]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(S,{roomID:n}),r.a.createElement(I,{board:l,socket:t,roomID:n}),r.a.createElement(T,{board:l,socket:t,roomID:n,player:i}),r.a.createElement(_,{socket:t,roomID:n,roomFull:c,player:i,winner:u})))}));var W=function(){return r.a.createElement("nav",{role:"navigation",class:"nav-table"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.linkedin.com/in/tom-o-shaughnessy/",target:"_blank"},r.a.createElement("img",{src:"./square-linkedin-512.png",width:"30px",height:"auto"}))),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/tomoshaughnessy/guesstimoji",target:"_blank"},r.a.createElement("img",{src:"./square-github.png",width:"30px",height:"auto"}))),r.a.createElement("li",null,r.a.createElement("a",{href:"http://157.245.254.196:3005/graphql",target:"_blank"},r.a.createElement("img",{src:"./square-graphql.png",width:"30px",height:"auto"})))))};function Y(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*o));return t}var G={roomJoined:function(e){return console.log("roomJoined -> joinData",e),{type:"room/roomJoined",payload:e}},gotBoards:function(e){return{type:"gotBoards",payload:e}},gotRooms:function(e){return{type:"gotRooms",payload:e}},homePageLoaded:function(e){return{type:"homePageLoaded",payload:e}}},U=Object(a.b)((function(e){return{roomID:e.room.roomID,player:e.room.player}}),G)((function(e){var t=e.roomJoined,n=e.homePageLoaded,a=e.gotBoards,c=e.gotRooms,l=e.roomID,i=e.player;Object(o.useEffect)((function(){j("{getBoards{emojis}}").then((function(e){return e.map((function(e){return e.emojis}))})).then((function(e){console.log("gotBoards"),a(e)})).catch((function(e){return console.error(e)})),k({group:"Smileys & Emotion"}).then((function(e){return e.map((function(e){return e.emoji}))})).then((function(e){return n(e[Math.floor(Math.random()*e.length)])})).catch((function(e){n("\u274c"),console.error(e)})),s.emit("client:rooms/roomsRequested"),s.on("server:rooms/roomsResponded",(function(e){console.log("rooms responded"),c(e)}))}),[]),Object(o.useEffect)((function(){console.log("QUERY TEST:",k({group:"Animals & Nature"}))}),[]);return r.a.createElement("div",{className:"App",align:"center"},i?r.a.createElement(F,{socket:s}):r.a.createElement(w,{handleJoin:function(e){console.log("handleJoin -> joinData",e),s.emit("client:room/roomJoined",e),s.on("server:room/roomJoined",(function(e){e&&t(e)}))},roomID:l,socket:s}),r.a.createElement(W,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(6),V=Object(X.b)({room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roomID:Y(5),roomFull:!1,board:[],randomSmiley:"\ud83d\ude0e"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"homePageLoaded":return Object(O.a)(Object(O.a)({},e),{},{randomSmiley:t.payload});case"room/roomJoined":return console.log("new state update game",Object(O.a)(Object(O.a)({},e),t.payload)),Object(O.a)(Object(O.a)({},e),t.payload);default:return e}},gameLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("in gameLog reducer"),t.type){case"gameLog/cleared":return[];case"gameLog/turnSubmitted":return[t.payload].concat(Object(R.a)(e));default:return e}},opponentBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Array(35).fill(!0),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"opponentBoard/reset":return new Array(35).fill(!0);case"opponentBoard/click":return e.map((function(e,n){return n===t.payload?!e:e}));default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"player/picked":return!0;case"player/reset":return!1;default:return e}},boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{boards:[["\ud83e\udd23","\ud83d\ude02","\ud83d\ude42","\ud83d\ude04","\ud83d\ude43","\ud83d\ude0a","\ud83d\ude09","\ud83d\ude07","\ud83d\ude0d","\ud83e\udd70","\ud83e\udd29","\ud83d\ude03","\ud83d\ude05","\ud83d\ude01","\ud83d\ude06","\ud83d\ude17","\ud83d\ude00","\ud83d\ude1a","\u263a\ufe0f","\u263a","\ud83d\ude19","\ud83e\udd72","\ud83d\ude0b","\ud83d\ude1b","\ud83d\ude18","\ud83d\ude1c","\ud83e\udd2a","\ud83d\ude1d","\ud83e\udd11","\ud83e\udd17","\ud83e\udd2d","\ud83e\udd2b","\ud83e\udd14","\ud83e\udd10","\ud83e\udd28","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude0f","\ud83d\ude12"]],previews:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gotBoards":return Object(O.a)(Object(O.a)({},e),{},{boards:t.payload,previews:t.payload.map((function(e){var t,n="";for(t in e)n+=e[t]+"\u200a";return n}))});default:return e}},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gotRooms":return t.payload;default:return e}}}),Q=Object(X.c)(V,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(a.a,{store:Q},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.097d55c7.chunk.js.map