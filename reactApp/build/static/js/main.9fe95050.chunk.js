(this.webpackJsonpreactApp=this.webpackJsonpreactApp||[]).push([[0],{18:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),c=n(2),a=n(21),i=n.n(a),s=(n(18),n(46)),u=n.n(s)()("http://localhost:5000"),l=n(4),d=n(0),j=function(e){var t=e.header,n=e.emptyMessage,o=e.onClick,r=e.selections;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:t}),Object(d.jsx)("div",{id:"board-select",children:null!=r&&r.length>0?r.map((function(e,t){return Object(d.jsx)("button",{id:"board-select-button",onClick:function(){return o(t)},autoFocus:1==t,children:r[t]})})):"".concat(n)})]})},b=function(e){var t=e.roomID,n=e.board,o=e.handleJoin;return Object(d.jsx)("button",{id:"board-select-button",onClick:function(){return o({roomID:t,board:n})},children:"PLAY"})},h=Object(c.b)((function(e){return{boards:e.boards.boards,previews:e.boards.previews,rooms:e.rooms}}))((function(e){var t=e.boards,n=e.previews,r=e.rooms,c=e.handleJoin,a=e.roomID,i=e.socket,s=Object(o.useState)(t?t[0]:null),u=Object(l.a)(s,2),h=u[0],m=u[1],p=Object(o.useState)(a),f=Object(l.a)(p,2),g=f[0],O=f[1];return Object(d.jsxs)("div",{align:"center",children:["Room ID:",Object(d.jsx)("input",{"data-testid":"roomId",value:g,onChange:function(e){O(e.target.value)}}),Object(d.jsx)(b,{roomID:g,board:h,handleJoin:c}),Object(d.jsx)(j,{header:"Select Board",selections:n,onClick:function(e){m(t[e])},emptyMessage:"Waiting for boards fetch... \u231b"}),Object(d.jsx)(j,{header:"Join Room",selections:r,onClick:function(e){c({roomID:r[e],board:[]})},emptyMessage:"There are no rooms \ud83e\udd7a Make one or refresh!"}),Object(d.jsx)("button",{id:"board-select-button",onClick:function(){return i.emit("client:rooms/roomsRequested")},children:"Refresh Rooms"})]})})),m=n(10),p=n.n(m),f=n(16),g="http://localhost:3005/graphql",O=function(e){return e?JSON.stringify(e).replace(/"([^"]+)":/g,"$1:").replace("{","(").replace("}",")"):""},v=function(e){return fetch(g,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(t){return console.log("response from ".concat(e,": "),t.data),t.data})).catch((function(e){console.error(e)}))},x=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,o,r,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:null,n=O(t),o="\n        {\n            getEmojis".concat(n,"{\n                emoji\n            }\n        } \n    "),e.next=5,v(o);case 5:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.getEmojis);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()})).then((function(e){return console.log("response from ".concat(t,": "),e.data.getBoards),e.data.getBoards})).catch((function(e){console.error(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(c.b)((function(e){return{randomSmiley:e.room.randomSmiley}}))((function(e){var t=e.handleJoin,n=e.roomID,o=e.randomSmiley,r=e.socket;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{align:"center",children:"GUESSTIM"+o+"JI"}),Object(d.jsx)(h,{handleJoin:t,roomID:n,socket:r})]})})),w=n(3),S=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("h3",{children:["Room Name: ",e.roomID]})})};var D=function(e){var t=Object(o.useState)(e.value),n=Object(l.a)(t,2);return n[0],n[1],Object(d.jsx)("button",{className:"opponent-square",children:e.value})},I=Object(c.b)((function(e){return{show:e.opponentBoard}}),null)((function(e){e.socket;var t=e.board,n=e.show,o=function(e){return Object(d.jsx)(D,{index:e,value:n[e]?t[e]:"\u2588"})};return Object(d.jsxs)("div",{class:"board",children:[Object(d.jsxs)("div",{class:"board-row",children:[o(28),o(29),o(30),o(31),o(32),o(33),o(34)]}),Object(d.jsxs)("div",{class:"board-row",children:[o(21),o(22),o(23),o(24),o(25),o(26),o(27)]}),Object(d.jsxs)("div",{class:"board-row",children:[o(14),o(15),o(16),o(17),o(18),o(19),o(20)]}),Object(d.jsxs)("div",{class:"board-row",children:[o(7),o(8),o(9),o(10),o(11),o(12),o(13)]}),Object(d.jsxs)("div",{class:"board-row",children:[o(0),o(1),o(2),o(3),o(4),o(5),o(6)]})]})}));var E=function(e){var t=e.index,n=e.socket,r=e.value,c=e.onClick,a=e.onContextMenu,i=Object(o.useState)(!0),s=Object(l.a)(i,2),u=s[0],j=s[1];return Object(d.jsx)("button",{className:"square",onClick:c||function(){j(!u),n.emit("client:opponentBoard/clicked",t)},onContextMenu:function(e){e.preventDefault(),a()},children:u?r:"\u2588"})};var L=function(e){var t=e.pick;return Object(d.jsx)("button",{className:"choice",children:t?"You picked ".concat(t,"."):"Pick your emoji!"})},C={playerPicked:function(){return{type:"player/picked"}}},J=Object(c.b)((function(e){return{picked:e.player}}),C)((function(e){var t=e.socket,n=e.board,r=e.player,c=e.picked,a=e.playerPicked,i=Object(o.useState)(""),s=Object(l.a)(i,2),u=s[0],j=s[1],b=function(e){return Object(d.jsx)(E,{index:e,socket:t,value:n[e],onClick:c?null:function(){return function(e){t.emit("client:players/picked",{player:r,pick:n[e]}),a(),j(n[e])}(e)},onContextMenu:function(){!function(e){navigator.clipboard.writeText(n[e]).then((function(){alert(n[e]+" copied! Paste it in the board to guess!")}),(function(){alert("Couldn't copy emoji. Invalid permissions.")}))}(e)}})};return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{class:"board-row",children:[b(0),b(1),b(2),b(3),b(4),b(5),b(6)]}),Object(d.jsxs)("div",{class:"board-row",children:[b(7),b(8),b(9),b(10),b(11),b(12),b(13)]}),Object(d.jsxs)("div",{class:"board-row",children:[b(14),b(15),b(16),b(17),b(18),b(19),b(20)]}),Object(d.jsxs)("div",{class:"board-row",children:[b(21),b(22),b(23),b(24),b(25),b(26),b(27)]}),Object(d.jsxs)("div",{class:"board-row",children:[b(28),b(29),b(30),b(31),b(32),b(33),b(34)]}),Object(d.jsx)("div",{class:"text-row",children:Object(d.jsx)(L,{pick:u})})]})})),T=function(e){var t=e.handleSubmitTurn,n=e.askingTurn,r=Object(o.useState)(""),c=Object(l.a)(r,2),a=c[0],i=c[1];return n?Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{onChange:function(e){i(e.target.value)},value:a,placeholder:"Ask question or guess"}),Object(d.jsx)("button",{id:"board-select-button",onClick:function(){return t(a)},children:"SEND"})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{id:"board-select-button",onClick:function(){return t("Yes.")},children:"YES"}),Object(d.jsx)("button",{id:"board-select-button",onClick:function(){return t("No.")},children:"NO"})]})},B=function(e){var t=e.opponent;return e.askingTurn?Object(d.jsx)("div",{children:"Waiting for Player ".concat(t," to ask...")}):Object(d.jsx)("div",{children:"Waiting for Player ".concat(t," to answer your question...")})},N=Object(c.b)((function(e){return{picked:e.player}}),null)((function(e){e.socket;var t=e.player,n=e.picked,o=e.turn,r=(e.roomID,e.roomFull),c=e.handleSubmitTurn,a=o%4===1||o%4===2,i=1===t&&a||2===t&&!a,s=o%2===0,u=t%2+1;return e.winner?Object(d.jsx)("div",{children:"GAME OVER"}):r?n?i?Object(d.jsx)(T,{handleSubmitTurn:c,askingTurn:s}):Object(d.jsx)(B,{opponent:u,askingTurn:s}):Object(d.jsx)("div",{}):Object(d.jsx)("div",{children:"Waiting for Player 2 to join..."})})),R=n(47),q=function(e){return{type:"gameLog/turnSubmitted",payload:e}},M=function(){return{type:"gameLog/cleared"}},P={turnSubmitted:q},_=Object(c.b)((function(e){return{gameLog:e.gameLog}}),P)((function(e){var t=e.socket,n=e.roomID,o=e.roomFull,r=e.gameLog,a=e.player,i=e.winner,s=a%2+1;console.log("GameLog -> player",a),console.log("GameLog -> opponent",s);var u=Object(c.c)();return Object(d.jsxs)("div",{children:[Object(d.jsx)(N,{socket:t,player:a,turn:r.length,roomID:n,roomFull:o,handleSubmitTurn:function(e){var n=e.trim();t.emit("client:gameLog/turnSubmitted",{player:a,message:n}),u(q({username:"You",message:n}))},winner:i}),Object(d.jsx)("div",{class:"game-log-box",children:r.map((function(e,t){var n=e.username,o=e.message;return Object(d.jsxs)("div",{class:0===t?"game-log-last-message":"game-log-message",children:[Object(d.jsx)("span",{children:n+":"}),Object(d.jsx)("span",{children:o})]},t)}))})]})})),A=(n(90),{turnSubmitted:q,cleared:M}),F=Object(c.b)((function(e){return Object(w.a)({},e.room)}),A)((function(e){var t=e.socket,n=e.roomID,r=e.roomFull,a=e.board,i=e.player,s=(e.gameCount,e.winner),u=Object(c.c)();return Object(o.useEffect)((function(){r?(t.on("server:gameLog/turnSubmitted",(function(e){u(q(e))})),t.on("server:opponentBoard/clicked",(function(e){u(function(e){return{type:"opponentBoard/click",payload:e}}(e))}))):(t.off("server:gameLog/turnSubmitted"),t.off("server:opponentBoard/clicked"))}),[r]),Object(o.useEffect)((function(){t.on("server:gameLog/cleared",(function(){u({type:"gameLog/cleared"})}))}),[]),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)(S,{roomID:n}),Object(d.jsx)(I,{board:a,socket:t,roomID:n}),Object(d.jsx)(J,{board:a,socket:t,roomID:n,player:i}),Object(d.jsx)(_,{socket:t,roomID:n,roomFull:r,player:i,winner:s})]})})}));var W=function(){return Object(d.jsx)("nav",{role:"navigation",class:"nav-table",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"https://www.linkedin.com/in/tom-o-shaughnessy/",target:"_blank",children:Object(d.jsx)("img",{src:"./square-linkedin-512.png",width:"30px",height:"auto"})})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"https://github.com/tomoshaughnessy/guesstimoji",target:"_blank",children:Object(d.jsx)("img",{src:"./square-github.png",width:"30px",height:"auto"})})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"http://localhost:3005/graphql",target:"_blank",children:Object(d.jsx)("img",{src:"./square-graphql.png",width:"30px",height:"auto"})})})]})})};function Y(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*o));return t}var G={roomJoined:function(e){return console.log("roomJoined -> joinData",e),{type:"room/roomJoined",payload:e}},gotBoards:function(e){return{type:"gotBoards",payload:e}},gotRooms:function(e){return{type:"gotRooms",payload:e}},homePageLoaded:function(e){return{type:"homePageLoaded",payload:e}}},U=Object(c.b)((function(e){return{roomID:e.room.roomID,player:e.room.player}}),G)((function(e){var t=e.roomJoined,n=e.homePageLoaded,r=e.gotBoards,c=e.gotRooms,a=e.roomID,i=e.player;Object(o.useEffect)((function(){y("{getBoards{emojis}}").then((function(e){return e.map((function(e){return e.emojis}))})).then((function(e){console.log("gotBoards"),r(e)})).catch((function(e){return console.error(e)})),x({group:"Smileys & Emotion"}).then((function(e){return e.map((function(e){return e.emoji}))})).then((function(e){return n(e[Math.floor(Math.random()*e.length)])})).catch((function(e){n("\u274c"),console.error(e)})),u.emit("client:rooms/roomsRequested"),u.on("server:rooms/roomsResponded",(function(e){console.log("rooms responded"),c(e)}))}),[]),Object(o.useEffect)((function(){console.log("QUERY TEST:",x({group:"Animals & Nature"}))}),[]);return Object(d.jsxs)("div",{className:"App",align:"center",children:[i?Object(d.jsx)(F,{socket:u}):Object(d.jsx)(k,{handleJoin:function(e){console.log("handleJoin -> joinData",e),u.emit("client:room/roomJoined",e),u.on("server:room/roomJoined",(function(e){e&&t(e)}))},roomID:a,socket:u}),Object(d.jsx)(W,{})]})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(14),V=Object(X.b)({room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roomID:Y(5),roomFull:!1,board:[],randomSmiley:"\ud83d\ude0e"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"homePageLoaded":return Object(w.a)(Object(w.a)({},e),{},{randomSmiley:t.payload});case"room/roomJoined":return console.log("new state update game",Object(w.a)(Object(w.a)({},e),t.payload)),Object(w.a)(Object(w.a)({},e),t.payload);default:return e}},gameLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("in gameLog reducer"),t.type){case"gameLog/cleared":return[];case"gameLog/turnSubmitted":return[t.payload].concat(Object(R.a)(e));default:return e}},opponentBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Array(35).fill(!0),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"opponentBoard/reset":return new Array(35).fill(!0);case"opponentBoard/click":return e.map((function(e,n){return n===t.payload?!e:e}));default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"player/picked":return!0;case"player/reset":return!1;default:return e}},boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{boards:[["\ud83e\udd23","\ud83d\ude02","\ud83d\ude42","\ud83d\ude04","\ud83d\ude43","\ud83d\ude0a","\ud83d\ude09","\ud83d\ude07","\ud83d\ude0d","\ud83e\udd70","\ud83e\udd29","\ud83d\ude03","\ud83d\ude05","\ud83d\ude01","\ud83d\ude06","\ud83d\ude17","\ud83d\ude00","\ud83d\ude1a","\u263a\ufe0f","\u263a","\ud83d\ude19","\ud83e\udd72","\ud83d\ude0b","\ud83d\ude1b","\ud83d\ude18","\ud83d\ude1c","\ud83e\udd2a","\ud83d\ude1d","\ud83e\udd11","\ud83e\udd17","\ud83e\udd2d","\ud83e\udd2b","\ud83e\udd14","\ud83e\udd10","\ud83e\udd28","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude0f","\ud83d\ude12"]],previews:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gotBoards":return Object(w.a)(Object(w.a)({},e),{},{boards:t.payload,previews:t.payload.map((function(e){var t,n="";for(t in e)n+=e[t]+"\u200a";return n}))});default:return e}},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gotRooms":return t.payload;default:return e}}}),Q=Object(X.c)(V,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(c.a,{store:Q,children:Object(d.jsx)(U,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[92,1,2]]]);
//# sourceMappingURL=main.9fe95050.chunk.js.map